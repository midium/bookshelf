{"version":3,"sources":["token.js","vue-pagination.js","vue-header.js","languages.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"languages.js","sourcesContent":["\"use strict\";\r\n\r\nVue.http.headers.common['X-CSRF-TOKEN'] = document.querySelector('#token').getAttribute('value');\r\n","/**\r\n * Pagination Mixin\r\n */\r\nvar paginationMixin = {\r\n    props: {\r\n         'wrapperClass': {\r\n            type: String,\r\n            default: function() {\r\n                return 'ui right floated pagination menu'\r\n            }\r\n        },\r\n        'activeClass': {\r\n            type: String,\r\n            default: function() {\r\n                return 'active large'\r\n            }\r\n        },\r\n        'disabledClass': {\r\n            type: String,\r\n            default: function() {\r\n                return 'disabled'\r\n            }\r\n        },\r\n        'pageClass': {\r\n            type: String,\r\n            default: function() {\r\n                return 'item'\r\n            }\r\n        },\r\n        'linkClass': {\r\n            type: String,\r\n            default: function() {\r\n                return 'icon item'\r\n            }\r\n        },\r\n        'icons': {\r\n            type: Object,\r\n            default: function() {\r\n                return {\r\n                    first: 'angle double left icon',\r\n                    prev: 'left chevron icon',\r\n                    next: 'right chevron icon',\r\n                    last: 'angle double right icon',\r\n                }\r\n            }\r\n        },\r\n        'onEachSide': {\r\n            type: Number,\r\n            coerce: function(value) {\r\n                return parseInt(value)\r\n            },\r\n            default: function() {\r\n                return 2\r\n            }\r\n        },\r\n    },\r\n    data: function() {\r\n        return {\r\n            tablePagination: null\r\n        }\r\n    },\r\n    computed: {\r\n        totalPage: function() {\r\n            return this.tablePagination == null\r\n                ? 0\r\n                : this.tablePagination.last_page\r\n        },\r\n        isOnFirstPage: function() {\r\n            return this.tablePagination == null\r\n                ? false\r\n                : this.tablePagination.current_page == 1\r\n        },\r\n        isOnLastPage: function() {\r\n            return this.tablePagination == null\r\n                ? false\r\n                : this.tablePagination.current_page == this.tablePagination.last_page\r\n        },\r\n        notEnoughPages: function() {\r\n            return this.totalPage < (this.onEachSide * 2) + 4\r\n        },\r\n        windowSize: function() {\r\n            return this.onEachSide * 2 +1;\r\n        },\r\n        windowStart: function() {\r\n            if (this.tablePagination.current_page <= this.onEachSide) {\r\n                return 1\r\n            } else if (this.tablePagination.current_page >= (this.totalPage - this.onEachSide)) {\r\n                return this.totalPage - this.onEachSide*2\r\n            }\r\n\r\n            return this.tablePagination.current_page - this.onEachSide\r\n        },\r\n    },\r\n    methods: {\r\n        loadPage: function(page) {\r\n            this.$dispatch('vuetable-pagination:change-page', page)\r\n        },\r\n        isCurrentPage: function(page) {\r\n            return page == this.tablePagination.current_page\r\n        }\r\n    },\r\n    events: {\r\n        'vuetable:load-success': function(tablePagination) {\r\n            this.tablePagination = tablePagination\r\n        },\r\n        'vuetable-pagination:set-options': function(options) {\r\n            for (var n in options) {\r\n                this.$set(n, options[n])\r\n            }\r\n        }\r\n    },\r\n}\r\n","var MyHeader = Vue.extend({\r\n  template: '#header-control-template',\r\n  props: {\r\n    headerTitle: {\r\n      type: String,\r\n      default: 'Title'\r\n    },\r\n    searchPlaceholder: {\r\n      type: String,\r\n      default: 'Search all'\r\n    },\r\n    search: { // Allow searching\r\n      type: Boolean,\r\n      coerce: this.coerceBoolean,\r\n      default: false\r\n    },\r\n    filterSearch: { // Let the control know this will be used as filter for the v-for calls\r\n      type: Boolean,\r\n      coerce: this.coerceBoolean,\r\n      default: false\r\n    },\r\n    exportExcel: { // Allow data export icon\r\n      type: Boolean,\r\n      coerce: this.coerceBoolean,\r\n      default: false\r\n    },\r\n    exportButtonTooltip: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    backButton: { // Allow back button\r\n      type: Boolean,\r\n      coerce: this.coerceBoolean,\r\n      default: false\r\n    },\r\n    clearButton: { // Allow search clear button\r\n      type: Boolean,\r\n      coerce: this.coerceBoolean,\r\n      default: false\r\n    },\r\n    addButton: { // Allow add button\r\n      type: Boolean,\r\n      coerce: this.coerceBoolean,\r\n      default: false\r\n    },\r\n    addButtonTooltip: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    showImage: { // Allow image on header\r\n      type: Boolean,\r\n      coerce: this.coerceBoolean,\r\n      default: false\r\n    },\r\n    imageUrl: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    searchFor: {\r\n      type: String,\r\n      twoWay: true,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      searchPerformed: false,\r\n      showBadge: false,\r\n      badgeText: '',\r\n      isMobileView: false,\r\n    }\r\n  },\r\n  ready() {\r\n    this.isMobileView = ($(window).width() < 768);\r\n  },\r\n  methods: {\r\n    coerceBoolean: function(val){\r\n      return (typeof val !== \"string\" ? val :\r\n        val === \"true\" ? true :\r\n        val === \"false\" ? false :\r\n        val === \"null\" ? false :\r\n        val === \"undefined\" ? false : val);\r\n    },\r\n    setFilter: function(){\r\n      if(!this.filterSearch){\r\n        this.searchPerformed = true;\r\n      }\r\n      this.dispatchEvent('set-filter', this.searchFor);\r\n    },\r\n    clearFilter: function(){\r\n      this.searchFor = '';\r\n      if(!this.filterSearch){\r\n        this.searchPerformed = false;\r\n      }\r\n      this.dispatchEvent('clear-filter');\r\n    },\r\n    addItem: function(){\r\n      this.dispatchEvent('add-item');\r\n    },\r\n    exportItem: function(){\r\n      this.dispatchEvent('export-item');\r\n    },\r\n    dispatchEvent: function(event, data){\r\n      this.$dispatch(event, data);\r\n    },\r\n  },\r\n  computed: {\r\n  },\r\n  events: {\r\n    'show-badge': function(val) {\r\n      this.showBadge = true;\r\n      this.badgeText = val;\r\n    },\r\n    'search-cleared': function(){\r\n      this.searchFor = '';\r\n    }\r\n  }\r\n});\r\n","// fields definition\r\nvar tableColumns = [\r\n    {\r\n      name: 'id',\r\n      sortField: 'id',\r\n      titleClass: '_id',\r\n      dataClass: '_id',\r\n      visible: false\r\n    },\r\n    {\r\n      name: 'code',\r\n      sortField: 'code'\r\n    },\r\n    {\r\n      name: 'language',\r\n      sortField: 'language'\r\n    },\r\n    {\r\n        name: 'bcount',\r\n        title: 'Books',\r\n        sortField: 'bcount',\r\n        titleClass: 'text-center',\r\n        dataClass: 'text-center',\r\n    },\r\n    {\r\n        name: '__actions',\r\n        dataClass: 'center aligned'\r\n    }\r\n];\r\n\r\n// Registering header\r\nVue.component('my-header', MyHeader);\r\n\r\n// create pagination component using bootstrap styling\r\nVue.component('vuetable-pagination-bootstrap', {\r\n    template: '#vuetable-pagination-bootstrap-template',\r\n    mixins: [paginationMixin],\r\n    methods: {\r\n        loadPage: function(page) {\r\n            this.$dispatch('vuetable-pagination:change-page', page)\r\n        },\r\n    },\r\n});\r\n\r\nnew Vue({\r\n    el: '#languages',\r\n\r\n    // data setup\r\n    data: {\r\n      fields: tableColumns,\r\n      paginationInfoTemplate: 'Displaying {from} to {to} of {total} items',\r\n      itemActions: [\r\n          { name: 'edit-item', label: '', icon: 'icon-Pen', class: 'btn btn-xs', title:'Edit Language'},\r\n          { name: 'delete-item', label: '', icon: 'icon-Bin', class: 'btn btn-xs', title:'Delete Language'},\r\n          { name: 'books-item', label: '', icon: 'glyphicon glyphicon-book', class: 'btn btn-xs', title:'Language\\'s Books'}\r\n      ],\r\n      newLanguage: {\r\n        'id': '',\r\n        'code': '',\r\n        'language': '',\r\n        'bcount': '',\r\n        'modaltitle': ''\r\n      }\r\n    },\r\n\r\n    // what to do once the page load at first\r\n    ready: function(){\r\n    },\r\n\r\n    // computations used to show/hide enable/disable controls\r\n    computed: {\r\n      languageIsNotFilled: function(){\r\n        var result = false;\r\n        for(var key in this.newLanguage){\r\n          if (! this.newLanguage[key] && key != 'bcount' && key != 'id') result = true;\r\n        }\r\n\r\n        return result;\r\n      }\r\n    },\r\n\r\n    // methods\r\n    methods: {\r\n      /**\r\n       * Vue table Callback functions\r\n       */\r\n      webLink: function(value) {\r\n        return '<a href=\"'+value+'\">'+value+'</a>'\r\n      },\r\n      emailLink: function(value) {\r\n        return '<a href=\"mailto:'+value+'\">'+value+'</a>'\r\n      },\r\n      nationFlag: function(value) {\r\n        return '<i class=\"mbs '+value+' flag\"></i>'\r\n      },\r\n      showLoader: function(){\r\n        $('.fullpage-mask').show();\r\n        $('.fullpage-loader').show();\r\n      },\r\n      hideLoader: function(){\r\n        $('.fullpage-mask').hide();\r\n        $('.fullpage-loader').hide();\r\n      },\r\n      onSubmitLanguage: function(e){\r\n        e.preventDefault();\r\n\r\n        var language = this.newLanguage;\r\n\r\n        // clearing information on the modal\r\n        this.newLanguage = { id: '', code: '', language: '', modaltitle: 'New Language' };\r\n\r\n        // saving to db\r\n        this.$http.post('/api/setLanguage', language);\r\n\r\n        // requiring table update\r\n        this.$broadcast('vuetable:reload');\r\n\r\n        $('#addModal').modal('hide');\r\n      },\r\n      addLanguage: function(e){\r\n        e.preventDefault();\r\n        this.newLanguage = { id: '', code: '', language: '', modaltitle: 'New Language' };\r\n        $('#addModal').modal('show');\r\n      }\r\n    },\r\n\r\n    events: {\r\n      'vuetable:action': function(action, data) {\r\n        var that = this;\r\n         if (action == 'edit-item') {\r\n             this.newLanguage = { id: data.id, code: data.code, language: data.language, modaltitle: 'Edit Language'}\r\n\r\n             $('#addModal').modal('show');\r\n\r\n         } else if (action == 'delete-item') {\r\n           swal({\r\n            title: 'Are you sure?',\r\n            text: \"You are about to remove this language, you won't be able to revert this!\",\r\n            type: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Yes, delete it!'\r\n          }).then(function(isConfirm) {\r\n            if (isConfirm) {\r\n              // collecting data to send\r\n              var info = { id: data.id };\r\n\r\n              // removing the language\r\n              that.$http.post('/api/deleteLanguage', info);\r\n\r\n              // requiring table update\r\n              that.$broadcast('vuetable:reload');\r\n            }\r\n          })\r\n        } else if (action == 'books-item') {\r\n          window.location.href = \"/language/books/\"+data.id;\r\n        }\r\n      },\r\n      'vuetable:load-error': function(response) {\r\n        console.log('load-error: ', response)\r\n      },\r\n      'vuetable:loading': function() {\r\n        this.showLoader();\r\n      },\r\n      'vuetable:loaded': function() {\r\n        this.hideLoader();\r\n      }\r\n    }\r\n});\r\n"],"sourceRoot":"/source/"}